<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      アメリカの単元株価格を得る方法は? &middot; HAN's BLOG
    
  </title>

  
  <link rel="canonical" href="https://hanseopark.github.io/jp/2021-07-06-stock-price/">
  

  <link rel="stylesheet" href="https://hanseopark.github.io/public/css/poole.css">
  <link rel="stylesheet" href="https://hanseopark.github.io/public/css/syntax.css">
  <link rel="stylesheet" href="https://hanseopark.github.io/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://hanseopark.github.io/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="https://hanseopark.github.io/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://hanseopark.github.io/atom.xml">

  
<link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
	<td>
	<a href= https://github.com/hanseopark> <i class="fab fa-github"></i> </a>
	<a style="padding-left:25px;" href= https://www.kaggle.com/hanseopark> <i class="fab fa-kaggle"></i> </a>
	<a style="padding-left:25px;" href= https://www.linkedin.com/in/hanseo-park-504100201> <i class="fab fa-linkedin"></i> </a>
	</td>

  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="https://hanseopark.github.io/">Home</a>

    

    
    
      
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="https://hanseopark.github.io/about/">About</a>
        
      
    
      
    
      
    
      
    

    <!-- <a class="sidebar-nav-item" href="/archive/v.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a> -->
  </nav>
  <div class="sidebar-item">
    <p>
	  <a href="https://hits.seeyoufarm.com"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fhanseopark.github.io&count_bg=%23D1D1D1&title_bg=%23555555&icon=xampp.svg&icon_color=%23E7E7E7&title=hits&edge_flat=false"/></a>
      &copy; 2025. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">


        <div class="container">

          <h3 class="masthead-title">
            <a href="/jp/" title="Home">HAN's BLOG</a>

            <small></small>
		<div class="head-right">
			<nav id="lang-sel">
				<ul class="lang">
					
					
					
					
					<li class="masthead_menu-item visible-links">
						<a href="/2021-07-06-stock-price/" class="enabled">En </a>|<a href="/ko/2021-07-06-stock-price/" class="enabled"> Ko</a> </a>|<a href="/jp/2021-07-06-stock-price/"> Jp</a>
					</li>
					
				</ul>
			</nav>
		</div>


			
          </h3>

		<div>

      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">アメリカの単元株価格を得る方法は?</h1>
  <span class="post-date">06 Jul 2021</span>
  <h3 id="stocks-price">Stock’s price</h3>

<p>このページはパイソン（Python）APIを用いてアメリカの単元株価格をを得る方法について紹介します。</p>

<p>私が使うAPIに関しては多く2つあります。</p>

<ul>
  <li>pandas_datareader API</li>
</ul>

<p>代表的に皆さんがよく使うAPIです。このAPIは値段以外にもたくさんの情報を得ることができます。</p>

<blockquote>
  <p>pip install pandas-datareader</p>
</blockquote>

<ul>
  <li>yahoo_fin API</li>
</ul>

<p>私がより使うAPIはこれです。これはヤフーファイナンスの情報をクローリングして株式の情報を集めることです。これは公式的なAPIではないがただのクローリングとして情報を得るから特に問題ないと思います。</p>

<blockquote>
  <p>pip install yahoo_fin</p>
</blockquote>

<p>2つとも評価がいいAPIです。使い方法はこのページ以外にもGoogleの上に沢山あると思います。</p>

<h3 id="code-to-get-stocks-price">Code to get stock’s price</h3>

<blockquote>
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">pandas_datareader</span> <span class="k">as</span> <span class="n">pdr</span>
<span class="kn">import</span> <span class="n">yahoo_fin.stock_info</span> <span class="k">as</span> <span class="n">yfs</span>

<span class="kn">from</span> <span class="n">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="n">json</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_list</span><span class="p">,</span> <span class="n">index_name</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">run_yfs</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">run_pdr</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>

    <span class="c1">## Configuration directory url
</span>    <span class="n">url_data</span> <span class="o">=</span> <span class="n">url</span><span class="o">+</span><span class="sh">'</span><span class="s">data_origin/</span><span class="sh">'</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">Example Apple inc</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">run_pdr</span><span class="p">:</span>
        <span class="n">df_aapl</span> <span class="o">=</span> <span class="n">pdr</span><span class="p">.</span><span class="nc">DataReader</span><span class="p">(</span><span class="sh">'</span><span class="s">AAPL</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">yahoo</span><span class="sh">'</span><span class="p">,</span> <span class="n">start_day</span><span class="p">,</span> <span class="n">today</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">run_yfs</span><span class="p">:</span>
        <span class="n">start_day</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">'</span><span class="s">%m/%d/%y</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">today</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">'</span><span class="s">%m/%d/%y</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">df_aapl</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">get_data</span><span class="p">(</span><span class="sh">'</span><span class="s">AAPL</span><span class="sh">'</span><span class="p">,</span><span class="n">start_date</span><span class="o">=</span><span class="n">start_day</span><span class="p">,</span> <span class="n">end_date</span> <span class="o">=</span> <span class="n">today</span><span class="p">)</span>
        <span class="n">df_aapl</span> <span class="o">=</span> <span class="n">df_aapl</span><span class="p">.</span><span class="nf">reset_index</span><span class="p">()</span>
        <span class="n">df_aapl</span> <span class="o">=</span> <span class="n">df_aapl</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">open</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Open</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">index</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">high</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">High</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">low</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Low</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">close</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">adjclose</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Adj Close</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">volume</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">ticker</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Ticker</span><span class="sh">'</span><span class="p">})</span>
        <span class="n">df_aapl</span> <span class="o">=</span> <span class="n">df_aapl</span><span class="p">[[</span><span class="sh">'</span><span class="s">Ticker</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">High</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Low</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Open</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Adj Close</span><span class="sh">'</span><span class="p">]]</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">df_aapl</span><span class="p">)</span>

    <span class="n">df_recent</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">({</span><span class="sh">'</span><span class="s">Recent_price</span><span class="sh">'</span><span class="p">:</span> <span class="p">[]})</span>
    <span class="n">etf_values</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">error_symbols</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ticker</span> <span class="ow">in</span> <span class="nf">tqdm</span><span class="p">(</span><span class="n">index_list</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">run_pdr</span><span class="p">:</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">pdr</span><span class="p">.</span><span class="nc">DataReader</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span><span class="sh">'</span><span class="s">yahoo</span><span class="sh">'</span><span class="p">,</span> <span class="n">start_day</span><span class="p">,</span> <span class="n">today</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">run_yfs</span><span class="p">:</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">get_data</span><span class="p">(</span><span class="n">ticker</span><span class="p">,</span><span class="n">start_date</span><span class="o">=</span><span class="n">start_day</span><span class="p">,</span> <span class="n">end_date</span> <span class="o">=</span> <span class="n">today</span><span class="p">)</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">reset_index</span><span class="p">()</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">open</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Open</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">index</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">high</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">High</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">low</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Low</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">close</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">adjclose</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Adj Close</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">volume</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">ticker</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Ticker</span><span class="sh">'</span><span class="p">})</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="sh">'</span><span class="s">Ticker</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Date</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">High</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Low</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Open</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Close</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Volume</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">Adj Close</span><span class="sh">'</span><span class="p">]]</span>
            <span class="n">df_recent</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ticker</span><span class="p">,</span> <span class="sh">'</span><span class="s">Recent_price</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">get_live_price</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>
            <span class="n">etf_values</span><span class="p">[</span><span class="n">ticker</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">error_symbols</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">Error: </span><span class="sh">'</span><span class="p">,</span> <span class="n">error_symbols</span><span class="p">)</span>
            <span class="n">df_recent</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ticker</span><span class="p">,</span> <span class="sh">'</span><span class="s">Recent_price</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">get_live_price</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">run_pdr</span><span class="p">:</span>
        <span class="n">combined_value</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="n">etf_values</span><span class="p">)</span>
        <span class="n">combined_value</span> <span class="o">=</span> <span class="n">combined_value</span><span class="p">.</span><span class="nf">reset_index</span><span class="p">()</span>
        <span class="n">combined_value</span><span class="o">=</span> <span class="n">combined_value</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">level_0</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Ticker</span><span class="sh">'</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">run_yfs</span><span class="p">:</span>
        <span class="n">combined_value</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="n">etf_values</span><span class="p">)</span>
        <span class="n">combined_value</span> <span class="o">=</span> <span class="n">combined_value</span><span class="p">.</span><span class="nf">reset_index</span><span class="p">()</span>
        <span class="n">combined_value</span> <span class="o">=</span> <span class="n">combined_value</span><span class="p">.</span><span class="nf">drop</span><span class="p">([</span><span class="sh">'</span><span class="s">level_0</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">level_1</span><span class="sh">'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="n">combined_value</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">df_recent</span><span class="p">)</span>

    <span class="n">url_value_data</span> <span class="o">=</span> <span class="n">url_data</span><span class="o">+</span><span class="sh">'</span><span class="s">FS_{0}_Value</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">index_name</span><span class="p">)</span>
    <span class="n">combined_value</span><span class="p">.</span><span class="nf">to_json</span><span class="p">(</span><span class="n">url_value_data</span><span class="o">+</span><span class="sh">'</span><span class="s">.json</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">combined_value</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="n">url_value_data</span><span class="o">+</span><span class="sh">'</span><span class="s">.csv</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">url_recent_value_data</span> <span class="o">=</span> <span class="n">url_data</span><span class="o">+</span><span class="sh">'</span><span class="s">FS_{0}_Recent_Value</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">index_name</span><span class="p">)</span>
    <span class="n">df_recent</span><span class="p">.</span><span class="nf">to_json</span><span class="p">(</span><span class="n">url_recent_value_data</span><span class="o">+</span><span class="sh">'</span><span class="s">.json</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">df_recent</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="n">url_recent_value_data</span><span class="o">+</span><span class="sh">'</span><span class="s">.csv</span><span class="sh">'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">../config/config.json</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">root_url</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="sh">'</span><span class="s">root_dir</span><span class="sh">'</span><span class="p">]</span>

    <span class="n">filename</span><span class="o">=</span> <span class="nf">input</span><span class="p">(</span><span class="sh">"</span><span class="s">Choice of stock</span><span class="sh">'</span><span class="s">s list (dow, sp500, nasdaq, other, selected): </span><span class="sh">"</span><span class="p">)</span>

    <span class="n">dow_list</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">tickers_dow</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="sh">'</span><span class="s">dow</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">dow_list</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">tickers_dow</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">filename</span> <span class="o">==</span> <span class="sh">'</span><span class="s">sp500</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">dow_list</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">tickers_sp500</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">filename</span> <span class="o">==</span> <span class="sh">'</span><span class="s">nasdaq</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">dow_list</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">tickers_nasdaq</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">filename</span> <span class="o">==</span> <span class="sh">'</span><span class="s">other</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">dow_list</span> <span class="o">=</span> <span class="n">yfs</span><span class="p">.</span><span class="nf">tickers_other</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">filename</span> <span class="o">==</span> <span class="sh">'</span><span class="s">selected</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">root_url</span><span class="o">+</span><span class="sh">'</span><span class="s">/data_ForTrading/selected_ticker.json</span><span class="sh">'</span>
        <span class="n">temp_pd</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_json</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">temp_pd</span> <span class="o">=</span> <span class="n">temp_pd</span><span class="p">[</span><span class="sh">'</span><span class="s">Ticker</span><span class="sh">'</span><span class="p">]</span>
        <span class="n">dow_list</span> <span class="o">=</span> <span class="n">temp_pd</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="nf">tolist</span><span class="p">()</span>

    <span class="nf">print</span><span class="p">(</span><span class="n">dow_list</span><span class="p">)</span>

    <span class="c1">## Define time of start to end ##
</span>    <span class="c1">#td_1y = datetime.timedelta(weeks=52/2)
</span>    <span class="n">start_day</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>
    <span class="c1">#start_day = today-td_1y
</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">Price of stcok in {0} for date series and recent price</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="nf">main</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">root_url</span><span class="p">,</span> <span class="n">index_list</span> <span class="o">=</span> <span class="n">dow_list</span><span class="p">,</span> <span class="n">index_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span> <span class="n">start_day</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">today</span><span class="p">,</span> <span class="n">run_yfs</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">run_pdr</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="k">else</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>  </div>

</blockquote>

<p>願うIndexに関してyahoo_fin APIを用いてTickerをリストとして呼びます。</p>

<p>各Tickerに関して指定する日から今日までの単元株価格を測定します。さらに、現在の値段も別のデータフレイムとしてセーブします。NasdaqとotherのIndexは結構時間掛かるのでご注意ください。</p>

<h3 id="result">Result</h3>

<p>代表的にDow indexに関する情報を下に表します。　</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     Ticker       Date        High         Low        Open       Close       Volume   Adj Close
0       AAPL 2009-12-31    7.619643    7.520000    7.611786    7.526072  352410800.0    6.471693
1       AAPL 2010-01-04    7.660714    7.585000    7.622500    7.643214  493729600.0    6.572423
2       AAPL 2010-01-05    7.699643    7.616071    7.664286    7.656428  601904800.0    6.583786
3       AAPL 2010-01-06    7.686786    7.526786    7.656428    7.534643  552160000.0    6.479064
4       AAPL 2010-01-07    7.571429    7.466072    7.562500    7.520714  477131200.0    6.467088
...      ...        ...         ...         ...         ...         ...          ...         ...
84407    WMT 2021-06-21  136.750000  135.350006  135.660004  136.399994    6925000.0  136.399994
84408    WMT 2021-06-22  137.720001  136.229996  136.229996  137.029999    6369000.0  137.029999
84409    WMT 2021-06-23  136.990005  135.929993  136.500000  135.960007    6463500.0  135.960007
84410    WMT 2021-06-24  137.240005  136.100006  136.169998  136.910004    7814700.0  136.910004
84411    WMT 2021-06-25  138.860001  136.919998  137.130005  138.529999    9544400.0  138.529999

[84412 rows x 8 columns]
     Recent_price
AAPL    133.110001
AMGN    242.679993
AXP     169.449997
BA      248.380005
CAT     216.309998
CRM     241.869995
CSCO     53.060001
CVX     107.300003
DIS     178.350006
DOW      63.290001
GS      368.769989
HD      313.630005
HON     218.740005
IBM     146.839996
INTC     55.910000
JNJ     164.210007
JPM     154.050003
KO       54.320000
MCD     232.419998
MMM     194.750000
MRK      77.199997
MSFT    265.019989
NKE     154.350006
PG      134.919998
TRV     151.720001
UNH     404.950012
V       237.320007
VZ       56.380001
WBA      52.160000
WMT     138.529999
</code></pre></div>  </div>

</blockquote>

<h3 id="conclusion">Conclusion</h3>

<p>このようにアメリカの株式の情報を得ることができました。</p>

<p>もし、実際にこのコードを動いてみたい人は、ディレクトリのコードを直して動いてください。</p>

<p>このコードはクーグル上の沢山の人に手伝いました。本当にありがとうございます。</p>

<p>もしこのページに満足したら<a href="https://github.com/hanseopark/Stock/tree/master/ChoiceTicker">Github</a> に行って <strong>Star</strong> お願いします :)</p>


</div>


<div class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/jp/2021-07-06-financial-statements/">
            株式の財務諸表を得る方法は?
            <small>06 Jul 2021</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>



<div id="post-disqus" class="container">
<div id="disqus_thread"></div>
<script>
    /**
	*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
	*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
	/*
	var disqus_config = function () {
	this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
	this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
	};
	*/
	(function() { // DON'T EDIT BELOW THIS LINE
	var d = document, s = d.createElement('script');
	s.src = 'https://hanseopark-github-io.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/jp/public/js/script.js'></script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-HDN3NFF79P');
</script>

  </body>

</html>

